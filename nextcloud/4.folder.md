# Nextcloud – Part 4 - Quản lý File và Thư mục trên NextCloud

## 1. Quản lý thư mục

Đăng nhập bằng tài khoản user bình thường. Lấy ví dụ là tài khoản dungdb ở phòng kỹ thuật.

Tạo thư mục mới bằng cách click vào dấu cộng, click vào New folder. Đặt tên cho thư mục mới và nhấn Enter.

![Imgur](https://i.imgur.com/tqZlqvn.png)

![Imgur](https://i.imgur.com/RZfwUw1.png)

Bên trong thự mục Tài liệu kỹ thuật, tạo thêm các thư mục khác. Ví dụ như hình dưới

![Imgur](https://i.imgur.com/MdujJh8.png)

### 1.1. Tính năng thư mục yêu thích - Favorites

Ví dụ bạn thường xuyên truy cập vào thư mục Dự án. Thư mục này lại nằm bên trong rất nhiều thư mục cha khác. Bạn có thể đặt thư mục dự án làm thư mục yêu thích để lần sau truy cập vào dễ dàng hơn mà không cần phải tìm kiếm trong các thư mục khác.

Để đặt thư mục yêu thích, click vào dấu ba chấm tại thưc mục đó, sau đó click vào nút Add to favorites.

![Imgur](https://i.imgur.com/hGBQTyy.png)

Sau khi thêm thư mục yêu thích xong. Chúng ta click vào Favorites có thể thấy thư mục đã được thêm ở đây.

![Imgur](https://i.imgur.com/ckLxF2J.png)

### 1.2. Đổi tên thư mục

Chuột phải vào thư mục cần đổi tên, chọn Remane

![Imgur](https://i.imgur.com/dk7DEfY.png)

Đổi tên thư mục và nhấn Enter

![Imgur](https://i.imgur.com/0BMP2OP.png)

Thư mục đã được đổi tên thành công

![Imgur](https://i.imgur.com/9HX7xhC.png)

### 1.3. Dịch chuyển hoặc copy thư mục

Ví dụ cần di chuyển thư mục File thiết kế đang nằm trong thư mục Tài liệu cá nhân sang thư mục Dự án

Chuột phải chọn Move or copy. 

![Imgur](https://i.imgur.com/q2piJ8t.png)

Di chuyển đến thư mục dự án và click Move to Dự án. Nếu muốn copy một bản sang thư mục dự án thì click vào Copy to Dự án.

![Imgur](https://i.imgur.com/jrQKbcG.png)

Kiểm tra lại thư mục Dự án

![Imgur](https://i.imgur.com/1reXtRe.png)

**Chú ý:** Khi bạn thực hiện di chuyển hoặc sao chép thư mục, tất cả các thư mục con và tài liệu nằm trong thư mục đó cũng được dịch chuyển hoặc sao chép cùng.

### 1.4. Download thư mục

Chuột phải vào thư mục cần download và nhấn download

![Imgur](https://i.imgur.com/iMHfWhe.png)

Khi download thư mục, tất cả các thư mục con và tài liệu nằm trong thư mục đó cũng được download và nén cùng. Cần có các phần mềm như Winrar, 7zip để giải nén file sau khi tải về.

### 1.5. Xóa thư mục

Chuột phải vào thư mục cần xóa và chọn Delete folder

![Imgur](https://i.imgur.com/xBmkYns.png)

### 1.6. Một số tính năng khác

Các thao tác của người dùng đối với thư mục sẽ được ghi lại trong phần Activity của thư mục.

![Imgur](https://i.imgur.com/wgSCkQk.png)

Người dùng có thể thực hiện bình luận để ghi chú trên thư mục

![Imgur](https://i.imgur.com/cs4jXxf.png)

Để dễ dàng phân loại và tìm kiếm thư mục (hoặc file), người dùng có thể gán tag cho thư mục (hoặc file). Một thư mục (hoặc file) có thể có nhiều tag khác nhau.

Tại mục Detail => Tag, người dùng có thể thêm các tag đã có hoặc tạo các tag mới cho thư mục

![Imgur](https://i.imgur.com/YWvbBjR.png)

Sau khi được gán tag, người dùng có thể lọc các file theo tag bằng cách vào mục tag và gõ vào tag cần tìm. Các thư mục (hoặc file) có gán tag sẽ xuất hiện

![Imgur](https://i.imgur.com/D4Dd9ms.png)

## 2. Quản lý file

### 2.1. Tạo file

Mặc định, nextcloud hỗ trợ các định dạng file `.txt`, `.md`. Để sử dụng các file office, cần cài đặt thêm add-on Collabora. Phần này tôi sẽ hướng dẫn ở một bài viết trong tương lai.

![Imgur](https://i.imgur.com/cHJ2bAO.png)

![Imgur](https://i.imgur.com/2stxPXb.png)

Các file sẽ được auto save khi người dùng thực hiện thêm thông tin vào file. Các phiên bản chỉnh sửa của file sẽ được lưu lại và người dùng có thể Revert lại các phiên bản cũ bất cứ lúc nào.

Có một bất tiện là bạn không thể xem cụ thể được bản cũ đã thay đổi như thế nào như google docs. Tuy nhiên, bạn có thể download phiên bản cũ của tài liệu về máy để kiểm tra.

![Imgur](https://i.imgur.com/6fQJiYG.png)

### 2.2. Upload và download File

Để upload file, ta thực hiện như sau:

![Imgur](https://i.imgur.com/XpBo7Iu.png)

Chọn file cần upload:

![Imgur](https://i.imgur.com/C9UyXPn.png)

**Lưu ý:** Các thao tác khác như Thêm file yêu thích (Favorite),  Đổi tên file,  Dịch chuyển hoặc sao chép file, Download File, Xóa file, Kiểm tra hoạt động của file, Comment file, đánh tag thực hiện tương tự như hướng dẫn ở phần 1.

## 3. Phân quyền 

Các thao tác phân quyền cho thư mục và file là giống nhau.

Tại mục Detail => Sharing

![Imgur](https://i.imgur.com/6KmDrwk.png)


Có 2 cách để chia sẻ quyền sử dụng thư mục:

Cách 1: Chia sẻ bằng cách share link
Cách 2: Chia sẻ bằng cách thêm quyền sử dụng

### 3.1. Chia sẻ bằng cách share link

Tại mục: Sharing => Share link, click vào nút + để thực hiện tạo link share mới:

![Imgur](https://i.imgur.com/zNm1Ycj.png)

Việc chia sẻ bằng link cho phép người nhận link sử dụng Nextcloud mà không cần đăng nhập vào tài khoản.

Người quản trị có thể quản lý quyền hạn của link được share như sau:

![Imgur](https://i.imgur.com/FqPrKJ5.png)

- Read only: Người nhận được link share chỉ được đọc và download các tài liệu, không được phép thao tác.
- Allow upload and edit: Người nhận được share link sẽ có quyền upload và chỉnh sửa tài liệu tại thư mục được chia sẻ.
- File drop (upload only): Người nhận được share link sẽ chỉ có quyền upload tài liệu tại thư mục được chia sẻ.
- Hide download: Khi chọn Hide download, người dùng không thể download các tài liệu trong thư mục.
- Password Protect: Để bảo vệ tốt hơn cho link được share, người dùng có thể đặt password cho link. Khi người nhận link thì cần nhập password được cung cấp để truy cập file được chia sẻ. Lúc này người nhận link sẽ có đủ quyền upload, download và chỉnh sửa tài liệu
- Set expiration date: Nextcloud cho phép đặt ngày hết hạn cho link được share. Tới hết ngày hết hạn, đường link sẽ bị tự động vô hiệu hóa.
- Delete share link: Xóa đường link đã share

**Lưu ý:** Người quản trị có thể tạo ra nhiều Share link và cung cấp cho nhiều người dùng khác nhau.

### 3.2. Phân quyền theo user và group

Phân quyền bằng user nc_admin. Thêm user hoặc group để chia sẻ quyền sử dụng thư mục hoặc file

Ví dụ chia sẻ thư mục dưới với group Phòng kinh doanh

![Imgur](https://i.imgur.com/De9V3T5.png)

![Imgur](https://i.imgur.com/8hZ9T0b.png)

Mặc định khi chia sẻ, group hoặc user được chia sẻ sẽ có full quyền với thư mục hoặc file được share.

Người quản trị có thể giới hạn các quyền sau của group hoặc user được chia sẻ:

![Imgur](https://i.imgur.com/f39tt4t.png)

- Can reshare: Cho phép group hoặc user được chia sẻ có quyền chia sẻ lại thư mục.
- Can create : Cho phép group hoặc user được chia sẻ có quyền tạo thư mục hoặc file mới.
- Can change : Cho phép group hoặc user được chia sẻ có quyền thay đổi tên thư mục hoặc file
- Can delete : Cho phép group hoặc user được chia sẻ có quyền xóa thư mục hoặc file
- Set expiration date : Tạo ngày hết hạn cho group hoặc user được chia sẻ.
